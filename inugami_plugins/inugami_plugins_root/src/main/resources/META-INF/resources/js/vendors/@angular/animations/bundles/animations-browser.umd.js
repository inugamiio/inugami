!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/animations"),require("@angular/core")):"function"==typeof define&&define.amd?define("@angular/animations/browser",["exports","@angular/animations","@angular/core"],e):e(((t=t||self).ng=t.ng||{},t.ng.animations=t.ng.animations||{},t.ng.animations.browser={}),t.ng.animations,t.ng.core)}(this,function(t,z,e){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var U=function(){return(U=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function u(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,s=n.call(t),o=[];try{for(;(void 0===e||0<e--)&&!(r=s.next()).done;)o.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}return o}function W(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}function s(){return"undefined"!=typeof process}function H(t){switch(t.length){case 0:return new z.NoopAnimationPlayer;case 1:return t[0];default:return new z.ɵAnimationGroupPlayer(t)}}function E(t,s,e,n,o,a){void 0===o&&(o={}),void 0===a&&(a={});var u=[],l=[],h=-1,c=null;if(n.forEach(function(r){var t=r.offset,e=t==h,i=e&&c||{};Object.keys(r).forEach(function(t){var e=t,n=r[t];if("offset"!==t)switch(e=s.normalizePropertyName(e,u),n){case z.ɵPRE_STYLE:n=o[t];break;case z.AUTO_STYLE:n=a[t];break;default:n=s.normalizeStyleValue(t,e,n,u)}i[e]=n}),e||l.push(i),c=i,h=t}),u.length){throw new Error("Unable to animate due to the following errors:\n - "+u.join("\n - "))}return l}function a(t,e,n,r){switch(e){case"start":t.onStart(function(){return r(n&&i(n,"start",t))});break;case"done":t.onDone(function(){return r(n&&i(n,"done",t))});break;case"destroy":t.onDestroy(function(){return r(n&&i(n,"destroy",t))})}}function i(t,e,n){var r=n.totalTime,i=!!n.disabled,s=l(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==r?t.totalTime:r,i),o=t._data;return null!=o&&(s._data=o),s}function l(t,e,n,r,i,s,o){return void 0===i&&(i=""),void 0===s&&(s=0),{element:t,triggerName:e,fromState:n,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Y(t,e,n){var r;return t instanceof Map?(r=t.get(e))||t.set(e,r=n):r=(r=t[e])||(t[e]=n),r}function h(t){var e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}var o=function(t,e){return!1},c=function(t,e){return!1},p=function(t,e,n){return[]},f=s();!f&&"undefined"==typeof Element||(o=function(t,e){return t.contains(e)},c=function(){if(f||Element.prototype.matches)return function(t,e){return t.matches(e)};var t=Element.prototype,n=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return n?function(t,e){return n.apply(t,[e])}:c}(),p=function(t,e,n){var r=[];if(n)r.push.apply(r,W(t.querySelectorAll(e)));else{var i=t.querySelector(e);i&&r.push(i)}return r});var y=null,m=!1;function d(t){y||(y=("undefined"==typeof document?null:document.body)||{},m=!!y.style&&"WebkitAppearance"in y.style);var e=!0;y.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&!(e=t in y.style)&&m&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in y.style);return e}var v=c,g=o,_=p;function S(n){var r={};return Object.keys(n).forEach(function(t){var e=t.replace(/([a-z])([A-Z])/g,"$1-$2");r[e]=n[t]}),r}var b=(T.prototype.validateStyleProperty=function(t){return d(t)},T.prototype.matchesElement=function(t,e){return v(t,e)},T.prototype.containsElement=function(t,e){return g(t,e)},T.prototype.query=function(t,e,n){return _(t,e,n)},T.prototype.computeStyle=function(t,e,n){return n||""},T.prototype.animate=function(t,e,n,r,i,s,o){return void 0===s&&(s=[]),new z.NoopAnimationPlayer(n,r)},T=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(o=(s<3?i(o):3<s?i(e,n,o):i(e,n))||o);return 3<s&&o&&Object.defineProperty(e,n,o),o}([e.Injectable()],T));function T(){}var w=(P.NOOP=new b,P);function P(){}var k=1e3,$="ng-enter",V="ng-leave",A="ng-trigger",N=".ng-trigger",O="ng-animating",G=".ng-animating";function C(t){if("number"==typeof t)return t;var e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:F(parseFloat(e[1]),e[2])}function F(t,e){switch(e){case"s":return t*k;default:return t}}function D(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){var r,i=0,s="";if("string"==typeof t){var o=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===o)return e.push('The provided timing value "'+t+'" is invalid.'),{duration:0,delay:0,easing:""};r=F(parseFloat(o[1]),o[2]);var a=o[3];null!=a&&(i=F(parseFloat(a),o[4]));var u=o[5];u&&(s=u)}else r=t;if(!n){var l=!1,h=e.length;r<0&&(e.push("Duration values below 0 are not allowed for this animation step."),l=!0),i<0&&(e.push("Delay values below 0 are not allowed for this animation step."),l=!0),l&&e.splice(h,0,'The provided timing value "'+t+'" is invalid.')}return{duration:r,delay:i,easing:s}}(t,e,n)}function L(e,n){return void 0===n&&(n={}),Object.keys(e).forEach(function(t){n[t]=e[t]}),n}function j(t){var e={};return Array.isArray(t)?t.forEach(function(t){return x(t,!1,e)}):x(t,!1,e),e}function x(t,e,n){if(void 0===n&&(n={}),e)for(var r in t)n[r]=t[r];else L(t,n);return n}function q(t,e,n){return n?e+":"+n+";":""}function R(t){for(var e="",n=0;n<t.style.length;n++){e+=q(0,r=t.style.item(n),t.style.getPropertyValue(r))}for(var r in t.style){if(t.style.hasOwnProperty(r)&&!r.startsWith("_"))e+=q(0,r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[r])}t.setAttribute("style",e)}function Z(n,r,i){n.style&&(Object.keys(r).forEach(function(t){var e=tt(t);i&&!i.hasOwnProperty(t)&&(i[t]=n.style[e]),n.style[e]=r[t]}),s()&&R(n))}function J(n,t){n.style&&(Object.keys(t).forEach(function(t){var e=tt(t);n.style[e]=""}),s()&&R(n))}function I(t){return Array.isArray(t)?1==t.length?t[0]:z.sequence(t):t}var K=new RegExp("{{\\s*(.+?)\\s*}}","g");function Q(t){var e=[];if("string"==typeof t){for(var n=t.toString(),r=void 0;r=K.exec(n);)e.push(r[1]);K.lastIndex=0}return e}function B(t,r,i){var e=t.toString(),n=e.replace(K,function(t,e){var n=r[e];return r.hasOwnProperty(e)||(i.push("Please provide a value for the animation param "+e),n=""),n.toString()});return n==e?t:n}function M(t){for(var e=[],n=t.next();!n.done;)e.push(n.value),n=t.next();return e}var X=/-+([a-z0-9])/g;function tt(t){return t.replace(X,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t[1].toUpperCase()})}function et(t,e){return 0===t||0===e}function nt(n,t,e){var r=Object.keys(e);if(r.length&&t.length){var i=t[0],s=[];if(r.forEach(function(t){i.hasOwnProperty(t)||s.push(t),i[t]=e[t]}),s.length)for(var o=function(){var e=t[a];s.forEach(function(t){e[t]=it(n,t)})},a=1;a<t.length;a++)o()}return t}function rt(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error("Unable to resolve animation metadata node #"+e.type)}}function it(t,e){return window.getComputedStyle(t)[e]}var st="*";function ot(t,e){var n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(function(t){return function(t,e,n){if(":"==t[0]){var r=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return function(t,e){return parseFloat(e)>parseFloat(t)};case":decrement":return function(t,e){return parseFloat(e)<parseFloat(t)};default:return e.push('The transition alias value "'+t+'" is not supported'),"* => *"}}(t,n);if("function"==typeof r)return void e.push(r);t=r}var i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push('The provided transition expression "'+t+'" is not supported'),e;var s=i[1],o=i[2],a=i[3];e.push(lt(s,a));var u=s==st&&a==st;"<"!=o[0]||u||e.push(lt(a,s))}(t,n,e)}):n.push(t),n}var at=new Set(["true","1"]),ut=new Set(["false","0"]);function lt(i,s){var o=at.has(i)||ut.has(i),a=at.has(s)||ut.has(s);return function(t,e){var n=i==st||i==t,r=s==st||s==e;return!n&&o&&"boolean"==typeof t&&(n=t?at.has(i):ut.has(i)),!r&&a&&"boolean"==typeof e&&(r=e?at.has(s):ut.has(s)),n&&r}}var ht=new RegExp("s*:selfs*,?","g");function ct(t,e,n){return new pt(t).build(e,n)}var pt=(ft.prototype.build=function(t,e){var n=new yt(e);return this._resetContextStyleTimingState(n),rt(this,I(t),n)},ft.prototype._resetContextStyleTimingState=function(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0},ft.prototype.visitTrigger=function(t,i){var s=this,o=i.queryCount=0,a=i.depCount=0,u=[],l=[];return"@"==t.name.charAt(0)&&i.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(function(t){if(s._resetContextStyleTimingState(i),0==t.type){var e=t,n=e.name;n.toString().split(/\s*,\s*/).forEach(function(t){e.name=t,u.push(s.visitState(e,i))}),e.name=n}else if(1==t.type){var r=s.visitTransition(t,i);o+=r.queryCount,a+=r.depCount,l.push(r)}else i.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:u,transitions:l,queryCount:o,depCount:a,options:null}},ft.prototype.visitState=function(t,e){var n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){var i=new Set,s=r||{};if(n.styles.forEach(function(t){if(mt(t)){var e=t;Object.keys(e).forEach(function(t){Q(e[t]).forEach(function(t){s.hasOwnProperty(t)||i.add(t)})})}}),i.size){var o=M(i.values());e.errors.push('state("'+t.name+'", ...) must define default values for all the following style substitutions: '+o.join(", "))}}return{type:0,name:t.name,style:n,options:r?{params:r}:null}},ft.prototype.visitTransition=function(t,e){e.queryCount=0,e.depCount=0;var n=rt(this,I(t.animation),e);return{type:1,matchers:ot(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:dt(t.options)}},ft.prototype.visitSequence=function(t,e){var n=this;return{type:2,steps:t.steps.map(function(t){return rt(n,t,e)}),options:dt(t.options)}},ft.prototype.visitGroup=function(t,n){var r=this,i=n.currentTime,s=0,e=t.steps.map(function(t){n.currentTime=i;var e=rt(r,t,n);return s=Math.max(s,n.currentTime),e});return n.currentTime=s,{type:3,steps:e,options:dt(t.options)}},ft.prototype.visitAnimate=function(t,e){var n,r=function(t,e){var n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return vt(D(t,e).duration,0,"");var r=t;if(r.split(/\s+/).some(function(t){return"{"==t.charAt(0)&&"{"==t.charAt(1)})){var i=vt(0,0,"");return i.dynamic=!0,i.strValue=r,i}return vt((n=n||D(r,e)).duration,n.delay,n.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;var i=t.styles?t.styles:z.style({});if(5==i.type)n=this.visitKeyframes(i,e);else{var s=t.styles,o=!1;if(!s){o=!0;var a={};r.easing&&(a.easing=r.easing),s=z.style(a)}e.currentTime+=r.duration+r.delay;var u=this.visitStyle(s,e);u.isEmptyStep=o,n=u}return{type:4,timings:r,style:n,options:e.currentAnimateTimings=null}},ft.prototype.visitStyle=function(t,e){var n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n},ft.prototype._makeStyleAst=function(t,e){var n=[];Array.isArray(t.styles)?t.styles.forEach(function(t){"string"==typeof t?t==z.AUTO_STYLE?n.push(t):e.errors.push("The provided style string value "+t+" is not allowed."):n.push(t)}):n.push(t.styles);var i=!1,s=null;return n.forEach(function(t){if(mt(t)){var e=t,n=e.easing;if(n&&(s=n,delete e.easing),!i)for(var r in e)if(0<=e[r].toString().indexOf("{{")){i=!0;break}}}),{type:6,styles:n,easing:s,offset:t.offset,containsDynamicStyles:i,options:null}},ft.prototype._validateStyleAst=function(t,s){var o=this,e=s.currentAnimateTimings,a=s.currentTime,u=s.currentTime;e&&0<u&&(u-=e.duration+e.delay),t.styles.forEach(function(i){"string"!=typeof i&&Object.keys(i).forEach(function(t){if(o._driver.validateStyleProperty(t)){var e=s.collectedStyles[s.currentQuerySelector],n=e[t],r=!0;n&&(u!=a&&u>=n.startTime&&a<=n.endTime&&(s.errors.push('The CSS property "'+t+'" that exists between the times of "'+n.startTime+'ms" and "'+n.endTime+'ms" is also being animated in a parallel animation between the times of "'+u+'ms" and "'+a+'ms"'),r=!1),u=n.startTime),r&&(e[t]={startTime:u,endTime:a}),s.options&&function(t,e,n){var r=e.params||{},i=Q(t);i.length&&i.forEach(function(t){r.hasOwnProperty(t)||n.push("Unable to resolve the local animation param "+t+" in the given list of values")})}(i[t],s.options,s.errors)}else s.errors.push('The provided animation property "'+t+'" is not a supported CSS property for animations')})})},ft.prototype.visitKeyframes=function(t,i){var s=this,o={type:5,styles:[],options:null};if(!i.currentAnimateTimings)return i.errors.push("keyframes() must be placed inside of a call to animate()"),o;var a=0,u=[],l=!1,h=!1,c=0,e=t.steps.map(function(t){var e=s._makeStyleAst(t,i),n=null!=e.offset?e.offset:function(t){if("string"==typeof t)return null;var n=null;if(Array.isArray(t))t.forEach(function(t){if(mt(t)&&t.hasOwnProperty("offset")){var e=t;n=parseFloat(e.offset),delete e.offset}});else if(mt(t)&&t.hasOwnProperty("offset")){var e=t;n=parseFloat(e.offset),delete e.offset}return n}(e.styles),r=0;return null!=n&&(a++,r=e.offset=n),h=h||r<0||1<r,l=l||r<c,c=r,u.push(r),e});h&&i.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),l&&i.errors.push("Please ensure that all keyframe offsets are in order");var n=t.steps.length,p=0;0<a&&a<n?i.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(p=1/(n-1));var f=n-1,y=i.currentTime,m=i.currentAnimateTimings,d=m.duration;return e.forEach(function(t,e){var n=0<p?e==f?1:p*e:u[e],r=n*d;i.currentTime=y+m.delay+r,m.duration=r,s._validateStyleAst(t,i),t.offset=n,o.styles.push(t)}),o},ft.prototype.visitReference=function(t,e){return{type:8,animation:rt(this,I(t.animation),e),options:dt(t.options)}},ft.prototype.visitAnimateChild=function(t,e){return e.depCount++,{type:9,options:dt(t.options)}},ft.prototype.visitAnimateRef=function(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:dt(t.options)}},ft.prototype.visitQuery=function(t,e){var n=e.currentQuerySelector,r=t.options||{};e.queryCount++;var i=u(function(t){var e=!!t.split(/\s*,\s*/).find(function(t){return":self"==t});return e&&(t=t.replace(ht,"")),[t=t.replace(/@\*/g,N).replace(/@\w+/g,function(t){return N+"-"+t.substr(1)}).replace(/:animating/g,G),e]}((e.currentQuery=t).selector),2),s=i[0],o=i[1];e.currentQuerySelector=n.length?n+" "+s:s,Y(e.collectedStyles,e.currentQuerySelector,{});var a=rt(this,I(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:dt(t.options)}},ft.prototype.visitStagger=function(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");var n="full"===t.timings?{duration:0,delay:0,easing:"full"}:D(t.timings,e.errors,!0);return{type:12,animation:rt(this,I(t.animation),e),timings:n,options:null}},ft);function ft(t){this._driver=t}var yt=function(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null};function mt(t){return!Array.isArray(t)&&"object"==typeof t}function dt(t){return t?(t=L(t)).params&&(t.params=function(t){return t?L(t):null}(t.params)):t={},t}function vt(t,e,n){return{duration:t,delay:e,easing:n}}function gt(t,e,n,r,i,s,o,a){return void 0===o&&(o=null),void 0===a&&(a=!1),{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}var _t=(St.prototype.consume=function(t){var e=this._map.get(t);return e?this._map.delete(t):e=[],e},St.prototype.append=function(t,e){var n=this._map.get(t);n||this._map.set(t,n=[]),n.push.apply(n,W(e))},St.prototype.has=function(t){return this._map.has(t)},St.prototype.clear=function(){this._map.clear()},St);function St(){this._map=new Map}var Et=new RegExp(":enter","g"),bt=new RegExp(":leave","g");function Tt(t,e,n,r,i,s,o,a,u,l){return void 0===s&&(s={}),void 0===o&&(o={}),void 0===l&&(l=[]),(new wt).buildKeyframes(t,e,n,r,i,s,o,a,u,l)}var wt=(Pt.prototype.buildKeyframes=function(t,e,n,r,i,s,o,a,u,l){void 0===l&&(l=[]),u=u||new _t;var h=new At(t,e,u,r,i,l,[]);h.options=a,h.currentTimeline.setStyles([s],null,h.errors,a),rt(this,n,h);var c=h.timelines.filter(function(t){return t.containsAnimation()});if(c.length&&Object.keys(o).length){var p=c[c.length-1];p.allowOnlyTimelineStyles()||p.setStyles([o],null,h.errors,a)}return c.length?c.map(function(t){return t.buildKeyframes()}):[gt(e,[],[],[],0,0,"",!1)]},Pt.prototype.visitTrigger=function(t,e){},Pt.prototype.visitState=function(t,e){},Pt.prototype.visitTransition=function(t,e){},Pt.prototype.visitAnimateChild=function(t,e){var n=e.subInstructions.consume(e.element);if(n){var r=e.createSubContext(t.options),i=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,r,r.options);i!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t},Pt.prototype.visitAnimateRef=function(t,e){var n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t},Pt.prototype._visitSubInstructions=function(t,n,e){var r=n.currentTimeline.currentTime,i=null!=e.duration?C(e.duration):null,s=null!=e.delay?C(e.delay):null;return 0!==i&&t.forEach(function(t){var e=n.appendInstructionToTimeline(t,i,s);r=Math.max(r,e.duration+e.delay)}),r},Pt.prototype.visitReference=function(t,e){e.updateOptions(t.options,!0),rt(this,t.animation,e),e.previousNode=t},Pt.prototype.visitSequence=function(t,e){var n=this,r=e.subContextCount,i=e,s=t.options;if(s&&(s.params||s.delay)&&((i=e.createSubContext(s)).transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=kt);var o=C(s.delay);i.delayNextStep(o)}t.steps.length&&(t.steps.forEach(function(t){return rt(n,t,i)}),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),e.previousNode=t},Pt.prototype.visitGroup=function(n,r){var i=this,s=[],o=r.currentTimeline.currentTime,a=n.options&&n.options.delay?C(n.options.delay):0;n.steps.forEach(function(t){var e=r.createSubContext(n.options);a&&e.delayNextStep(a),rt(i,t,e),o=Math.max(o,e.currentTimeline.currentTime),s.push(e.currentTimeline)}),s.forEach(function(t){return r.currentTimeline.mergeTimelineCollectedStyles(t)}),r.transformIntoNewTimeline(o),r.previousNode=n},Pt.prototype._visitTiming=function(t,e){if(t.dynamic){var n=t.strValue;return D(e.params?B(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}},Pt.prototype.visitAnimate=function(t,e){var n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());var i=t.style;5==i.type?this.visitKeyframes(i,e):(e.incrementTime(n.duration),this.visitStyle(i,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t},Pt.prototype.visitStyle=function(t,e){var n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.getCurrentStyleProperties().length&&n.forwardFrame();var i=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(i):n.setStyles(t.styles,i,e.errors,e.options),e.previousNode=t},Pt.prototype.visitKeyframes=function(t,n){var e=n.currentAnimateTimings,r=n.currentTimeline.duration,i=e.duration,s=n.createSubContext().currentTimeline;s.easing=e.easing,t.styles.forEach(function(t){var e=t.offset||0;s.forwardTime(e*i),s.setStyles(t.styles,t.easing,n.errors,n.options),s.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(s),n.transformIntoNewTimeline(r+i),n.previousNode=t},Pt.prototype.visitQuery=function(i,s){var o=this,t=s.currentTimeline.currentTime,e=i.options||{},a=e.delay?C(e.delay):0;a&&(6===s.previousNode.type||0==t&&s.currentTimeline.getCurrentStyleProperties().length)&&(s.currentTimeline.snapshotCurrentStyles(),s.previousNode=kt);var u=t,n=s.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!e.optional,s.errors);s.currentQueryTotal=n.length;var l=null;n.forEach(function(t,e){s.currentQueryIndex=e;var n=s.createSubContext(i.options,t);a&&n.delayNextStep(a),t===s.element&&(l=n.currentTimeline),rt(o,i.animation,n),n.currentTimeline.applyStylesToKeyframe();var r=n.currentTimeline.currentTime;u=Math.max(u,r)}),s.currentQueryIndex=0,s.currentQueryTotal=0,s.transformIntoNewTimeline(u),l&&(s.currentTimeline.mergeTimelineCollectedStyles(l),s.currentTimeline.snapshotCurrentStyles()),s.previousNode=i},Pt.prototype.visitStagger=function(t,e){var n=e.parentContext,r=e.currentTimeline,i=t.timings,s=Math.abs(i.duration),o=s*(e.currentQueryTotal-1),a=s*e.currentQueryIndex;switch(i.duration<0?"reverse":i.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}var u=e.currentTimeline;a&&u.delayNextStep(a);var l=u.currentTime;rt(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-l+(r.startTime-n.currentTimeline.startTime)},Pt);function Pt(){}var kt={},At=(Object.defineProperty(Nt.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),Nt.prototype.updateOptions=function(t,e){var n=this;if(t){var r=t,i=this.options;null!=r.duration&&(i.duration=C(r.duration)),null!=r.delay&&(i.delay=C(r.delay));var s=r.params;if(s){var o=i.params;o=o||(this.options.params={}),Object.keys(s).forEach(function(t){e&&o.hasOwnProperty(t)||(o[t]=B(s[t],o,n.errors))})}}},Nt.prototype._copyOptions=function(){var t={};if(this.options){var e=this.options.params;if(e){var n=t.params={};Object.keys(e).forEach(function(t){n[t]=e[t]})}}return t},Nt.prototype.createSubContext=function(t,e,n){void 0===t&&(t=null);var r=e||this.element,i=new Nt(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return i.previousNode=this.previousNode,i.currentAnimateTimings=this.currentAnimateTimings,i.options=this._copyOptions(),i.updateOptions(t),i.currentQueryIndex=this.currentQueryIndex,i.currentQueryTotal=this.currentQueryTotal,(i.parentContext=this).subContextCount++,i},Nt.prototype.transformIntoNewTimeline=function(t){return this.previousNode=kt,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline},Nt.prototype.appendInstructionToTimeline=function(t,e,n){var r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},i=new Dt(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(i),r},Nt.prototype.incrementTime=function(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)},Nt.prototype.delayNextStep=function(t){0<t&&this.currentTimeline.delayNextStep(t)},Nt.prototype.invokeQuery=function(t,e,n,r,i,s){var o=[];if(r&&o.push(this.element),0<t.length){t=(t=t.replace(Et,"."+this._enterClassName)).replace(bt,"."+this._leaveClassName);var a=1!=n,u=this._driver.query(this.element,t,a);0!==n&&(u=n<0?u.slice(u.length+n,u.length):u.slice(0,n)),o.push.apply(o,W(u))}return i||0!=o.length||s.push('`query("'+e+'")` returned zero elements. (Use `query("'+e+'", { optional: true })` if you wish to allow this.)'),o},Nt);function Nt(t,e,n,r,i,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=i,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=kt,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Ot(this._driver,e,0),o.push(this.currentTimeline)}var Ot=(Ct.prototype.containsAnimation=function(){switch(this._keyframes.size){case 0:return!1;case 1:return 0<this.getCurrentStyleProperties().length;default:return!0}},Ct.prototype.getCurrentStyleProperties=function(){return Object.keys(this._currentKeyframe)},Object.defineProperty(Ct.prototype,"currentTime",{get:function(){return this.startTime+this.duration},enumerable:!0,configurable:!0}),Ct.prototype.delayNextStep=function(t){var e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t},Ct.prototype.fork=function(t,e){return this.applyStylesToKeyframe(),new Ct(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)},Ct.prototype._loadKeyframe=function(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))},Ct.prototype.forwardFrame=function(){this.duration+=1,this._loadKeyframe()},Ct.prototype.forwardTime=function(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()},Ct.prototype._updateStyle=function(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}},Ct.prototype.allowOnlyTimelineStyles=function(){return this._currentEmptyStepKeyframe!==this._currentKeyframe},Ct.prototype.applyEmptyStep=function(t){var e=this;t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(function(t){e._backFill[t]=e._globalTimelineStyles[t]||z.AUTO_STYLE,e._currentKeyframe[t]=z.AUTO_STYLE}),this._currentEmptyStepKeyframe=this._currentKeyframe},Ct.prototype.setStyles=function(t,e,n,r){var i=this;e&&(this._previousKeyframe.easing=e);var s=r&&r.params||{},o=function(t,e){var n,r={};return t.forEach(function(t){"*"===t?(n=n||Object.keys(e)).forEach(function(t){r[t]=z.AUTO_STYLE}):x(t,!1,r)}),r}(t,this._globalTimelineStyles);Object.keys(o).forEach(function(t){var e=B(o[t],s,n);i._pendingStyles[t]=e,i._localTimelineStyles.hasOwnProperty(t)||(i._backFill[t]=i._globalTimelineStyles.hasOwnProperty(t)?i._globalTimelineStyles[t]:z.AUTO_STYLE),i._updateStyle(t,e)})},Ct.prototype.applyStylesToKeyframe=function(){var n=this,r=this._pendingStyles,t=Object.keys(r);0!=t.length&&(this._pendingStyles={},t.forEach(function(t){var e=r[t];n._currentKeyframe[t]=e}),Object.keys(this._localTimelineStyles).forEach(function(t){n._currentKeyframe.hasOwnProperty(t)||(n._currentKeyframe[t]=n._localTimelineStyles[t])}))},Ct.prototype.snapshotCurrentStyles=function(){var n=this;Object.keys(this._localTimelineStyles).forEach(function(t){var e=n._localTimelineStyles[t];n._pendingStyles[t]=e,n._updateStyle(t,e)})},Ct.prototype.getFinalKeyframe=function(){return this._keyframes.get(this.duration)},Object.defineProperty(Ct.prototype,"properties",{get:function(){var t=[];for(var e in this._currentKeyframe)t.push(e);return t},enumerable:!0,configurable:!0}),Ct.prototype.mergeTimelineCollectedStyles=function(r){var i=this;Object.keys(r._styleSummary).forEach(function(t){var e=i._styleSummary[t],n=r._styleSummary[t];(!e||n.time>e.time)&&i._updateStyle(t,n.value)})},Ct.prototype.buildKeyframes=function(){var r=this;this.applyStylesToKeyframe();var i=new Set,s=new Set,o=1===this._keyframes.size&&0===this.duration,a=[];this._keyframes.forEach(function(t,e){var n=x(t,!0);Object.keys(n).forEach(function(t){var e=n[t];e==z.ɵPRE_STYLE?i.add(t):e==z.AUTO_STYLE&&s.add(t)}),o||(n.offset=e/r.duration),a.push(n)});var t=i.size?M(i.values()):[],e=s.size?M(s.values()):[];if(o){var n=a[0],u=L(n);n.offset=0,u.offset=1,a=[n,u]}return gt(this.element,a,t,e,this.duration,this.startTime,this.easing,!1)},Ct);function Ct(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}var Ft,Dt=(n(Lt,Ft=Ot),Lt.prototype.containsAnimation=function(){return 1<this.keyframes.length},Lt.prototype.buildKeyframes=function(){var t=this.keyframes,e=this.timings,n=e.delay,r=e.duration,i=e.easing;if(this._stretchStartingKeyframe&&n){var s=[],o=r+n,a=n/o,u=x(t[0],!1);u.offset=0,s.push(u);var l=x(t[0],!1);l.offset=jt(a),s.push(l);for(var h=t.length-1,c=1;c<=h;c++){var p=x(t[c],!1),f=n+p.offset*r;p.offset=jt(f/o),s.push(p)}r=o,n=0,i="",t=s}return gt(this.element,t,this.preStyleProps,this.postStyleProps,r,n,i,!0)},Lt);function Lt(t,e,n,r,i,s,o){void 0===o&&(o=!1);var a=Ft.call(this,t,e,s.delay)||this;return a.element=e,a.keyframes=n,a.preStyleProps=r,a.postStyleProps=i,a._stretchStartingKeyframe=o,a.timings={duration:s.duration,delay:s.delay,easing:s.easing},a}function jt(t,e){void 0===e&&(e=3);var n=Math.pow(10,e-1);return Math.round(t*n)/n}var xt=(qt.prototype.buildTimelines=function(t,e,n,r,i){var s=Array.isArray(e)?j(e):e,o=Array.isArray(n)?j(n):n,a=[];i=i||new _t;var u=Tt(this._driver,t,this._animationAst,$,V,s,o,r,i,a);if(a.length){var l="animation building failed:\n"+a.join("\n");throw new Error(l)}return u},qt);function qt(t,e){var n=[],r=ct(this._driver=t,e,n);if(n.length){var i="animation validation failed:\n"+n.join("\n");throw new Error(i)}this._animationAst=r}function Rt(){}var It=(Kt.prototype.normalizePropertyName=function(t,e){return t},Kt.prototype.normalizeStyleValue=function(t,e,n,r){return n},Kt);function Kt(){}var Qt,Bt=(n(Mt,Qt=Rt),Mt.prototype.normalizePropertyName=function(t,e){return tt(t)},Mt.prototype.normalizeStyleValue=function(t,e,n,r){var i="",s=n.toString().trim();if(Wt[e]&&0!==n&&"0"!==n)if("number"==typeof n)i="px";else{var o=n.match(/^[+-]?[\d\.]+([a-z]*)$/);o&&0==o[1].length&&r.push("Please provide a CSS unit value for "+t+":"+n)}return s+i},Mt);function Mt(){return null!==Qt&&Qt.apply(this,arguments)||this}var zt,Ut,Wt=(zt="width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(","),Ut={},zt.forEach(function(t){return Ut[t]=!0}),Ut);function Ht(t,e,n,r,i,s,o,a,u,l,h,c,p){return{type:0,element:t,triggerName:e,isRemovalTransition:i,fromState:n,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:u,preStyleProps:l,postStyleProps:h,totalTime:c,errors:p}}var Yt={},$t=(Vt.prototype.match=function(t,e,n,r){return function(t,e,n,r,i){return t.some(function(t){return t(e,n,r,i)})}(this.ast.matchers,t,e,n,r)},Vt.prototype.buildStyles=function(t,e,n){var r=this._stateStyles["*"],i=this._stateStyles[t],s=r?r.buildStyles(e,n):{};return i?i.buildStyles(e,n):s},Vt.prototype.build=function(t,i,e,n,r,s,o,a,u,l){var h=[],c=this.ast.options&&this.ast.options.params||Yt,p=o&&o.params||Yt,f=this.buildStyles(e,p,h),y=a&&a.params||Yt,m=this.buildStyles(n,y,h),d=new Set,v=new Map,g=new Map,_="void"===n,S={params:U({},c,y)},E=l?[]:Tt(t,i,this.ast.animation,r,s,f,m,S,u,h),b=0;if(E.forEach(function(t){b=Math.max(t.duration+t.delay,b)}),h.length)return Ht(i,this._triggerName,e,n,_,f,m,[],[],v,g,b,h);E.forEach(function(t){var e=t.element,n=Y(v,e,{});t.preStyleProps.forEach(function(t){return n[t]=!0});var r=Y(g,e,{});t.postStyleProps.forEach(function(t){return r[t]=!0}),e!==i&&d.add(e)});var T=M(d.values());return Ht(i,this._triggerName,e,n,_,f,m,E,T,v,g,b)},Vt);function Vt(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}var Gt=(Zt.prototype.buildStyles=function(n,r){var i={},s=L(this.defaultParams);return Object.keys(n).forEach(function(t){var e=n[t];null!=e&&(s[t]=e)}),this.styles.styles.forEach(function(t){if("string"!=typeof t){var n=t;Object.keys(n).forEach(function(t){var e=n[t];1<e.length&&(e=B(e,s,r)),i[t]=e})}}),i},Zt);function Zt(t,e){this.styles=t,this.defaultParams=e}var Jt=(Object.defineProperty(Xt.prototype,"containsQueries",{get:function(){return 0<this.ast.queryCount},enumerable:!0,configurable:!0}),Xt.prototype.matchTransition=function(e,n,r,i){return this.transitionFactories.find(function(t){return t.match(e,n,r,i)})||null},Xt.prototype.matchStyles=function(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)},Xt);function Xt(e,t){var n=this;this.name=e,this.ast=t,this.transitionFactories=[],this.states={},t.states.forEach(function(t){var e=t.options&&t.options.params||{};n.states[t.name]=new Gt(t.style,e)}),te(this.states,"true","1"),te(this.states,"false","0"),t.transitions.forEach(function(t){n.transitionFactories.push(new $t(e,t,n.states))}),this.fallbackTransition=function(t,e){return new $t(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[function(t,e){return!0}],options:null,queryCount:0,depCount:0},e)}(e,this.states)}function te(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}var ee=new _t,ne=(re.prototype.register=function(t,e){var n=[],r=ct(this._driver,e,n);if(n.length)throw new Error("Unable to build the animation due to the following errors: "+n.join("\n"));this._animations[t]=r},re.prototype._buildPlayer=function(t,e,n){var r=t.element,i=E(this._driver,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,i,t.duration,t.delay,t.easing,[],!0)},re.prototype.create=function(t,e,n){var r=this;void 0===n&&(n={});var i,s=[],o=this._animations[t],a=new Map;if(o?(i=Tt(this._driver,e,o,$,V,{},{},n,ee,s)).forEach(function(t){var e=Y(a,t.element,{});t.postStyleProps.forEach(function(t){return e[t]=null})}):(s.push("The requested animation doesn't exist or has already been destroyed"),i=[]),s.length)throw new Error("Unable to create the animation due to the following errors: "+s.join("\n"));a.forEach(function(e,n){Object.keys(e).forEach(function(t){e[t]=r._driver.computeStyle(n,t,z.AUTO_STYLE)})});var u=H(i.map(function(t){var e=a.get(t.element);return r._buildPlayer(t,{},e)}));return(this._playersById[t]=u).onDestroy(function(){return r.destroy(t)}),this.players.push(u),u},re.prototype.destroy=function(t){var e=this._getPlayer(t);e.destroy(),delete this._playersById[t];var n=this.players.indexOf(e);0<=n&&this.players.splice(n,1)},re.prototype._getPlayer=function(t){var e=this._playersById[t];if(!e)throw new Error("Unable to find the timeline player referenced by "+t);return e},re.prototype.listen=function(t,e,n,r){var i=l(e,"","","");return a(this._getPlayer(t),n,i,r),function(){}},re.prototype.command=function(t,e,n,r){if("register"!=n)if("create"!=n){var i=this._getPlayer(t);switch(n){case"play":i.play();break;case"pause":i.pause();break;case"reset":i.reset();break;case"restart":i.restart();break;case"finish":i.finish();break;case"init":i.init();break;case"setPosition":i.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}else{var s=r[0]||{};this.create(t,e,s)}else this.register(t,r[0])},re);function re(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}var ie="ng-animate-queued",se="ng-animate-disabled",oe=".ng-animate-disabled",ae=[],ue={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},le={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},he="__ng_removed",ce=(Object.defineProperty(pe.prototype,"params",{get:function(){return this.options.params},enumerable:!0,configurable:!0}),pe.prototype.absorbOptions=function(t){var e=t.params;if(e){var n=this.options.params;Object.keys(e).forEach(function(t){null==n[t]&&(n[t]=e[t])})}},pe);function pe(t,e){void 0===e&&(e=""),this.namespaceId=e;var n=t&&t.hasOwnProperty("value"),r=n?t.value:t;if(this.value=function(t){return null!=t?t:null}(r),n){var i=L(t);delete i.value,this.options=i}else this.options={};this.options.params||(this.options.params={})}var fe="void",ye=new ce(fe),me=(de.prototype.listen=function(t,e,n,r){var i=this;if(!this._triggers.hasOwnProperty(e))throw new Error('Unable to listen on the animation trigger event "'+n+'" because the animation trigger "'+e+"\" doesn't exist!");if(null==n||0==n.length)throw new Error('Unable to listen on the animation trigger "'+e+'" because the provided event is undefined!');if(!function(t){return"start"==t||"done"==t}(n))throw new Error('The provided animation trigger event "'+n+'" for the animation trigger "'+e+'" is not supported!');var s=Y(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);var a=Y(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(ke(t,A),ke(t,A+"-"+e),a[e]=ye),function(){i._engine.afterFlush(function(){var t=s.indexOf(o);0<=t&&s.splice(t,1),i._triggers[e]||delete a[e]})}},de.prototype.register=function(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)},de.prototype._getTrigger=function(t){var e=this._triggers[t];if(!e)throw new Error('The provided animation trigger "'+t+'" has not been registered!');return e},de.prototype.trigger=function(r,e,t,n){var i=this;void 0===n&&(n=!0);var s=this._getTrigger(e),o=new _e(this.id,e,r),a=this._engine.statesByElement.get(r);a||(ke(r,A),ke(r,A+"-"+e),this._engine.statesByElement.set(r,a={}));var u=a[e],l=new ce(t,this.id);if(t&&t.hasOwnProperty("value")||!u||l.absorbOptions(u.options),a[e]=l,u=u||ye,l.value===fe||u.value!==l.value){var h=Y(this._engine.playersByElement,r,[]);h.forEach(function(t){t.namespaceId==i.id&&t.triggerName==e&&t.queued&&t.destroy()});var c=s.matchTransition(u.value,l.value,r,l.params),p=!1;if(!c){if(!n)return;c=s.fallbackTransition,p=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:r,triggerName:e,transition:c,fromState:u,toState:l,player:o,isFallbackTransition:p}),p||(ke(r,ie),o.onStart(function(){Ae(r,ie)})),o.onDone(function(){var t=i.players.indexOf(o);0<=t&&i.players.splice(t,1);var e=i._engine.playersByElement.get(r);if(e){var n=e.indexOf(o);0<=n&&e.splice(n,1)}}),this.players.push(o),h.push(o),o}if(!function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var i=0;i<n.length;i++){var s=n[i];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}(u.params,l.params)){var f=[],y=s.matchStyles(u.value,u.params,f),m=s.matchStyles(l.value,l.params,f);f.length?this._engine.reportError(f):this._engine.afterFlush(function(){J(r,y),Z(r,m)})}},de.prototype.deregister=function(n){var r=this;delete this._triggers[n],this._engine.statesByElement.forEach(function(t,e){delete t[n]}),this._elementListeners.forEach(function(t,e){r._elementListeners.set(e,t.filter(function(t){return t.name!=n}))})},de.prototype.clearElementCache=function(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);var e=this._engine.playersByElement.get(t);e&&(e.forEach(function(t){return t.destroy()}),this._engine.playersByElement.delete(t))},de.prototype._signalRemovalForInnerTriggers=function(t,n,e){var r=this;void 0===e&&(e=!1),this._engine.driver.query(t,N,!0).forEach(function(e){if(!e[he]){var t=r._engine.fetchNamespacesByElement(e);t.size?t.forEach(function(t){return t.triggerLeaveAnimation(e,n,!1,!0)}):r.clearElementCache(e)}})},de.prototype.triggerLeaveAnimation=function(n,t,e,r){var i=this,s=this._engine.statesByElement.get(n);if(s){var o=[];if(Object.keys(s).forEach(function(t){if(i._triggers[t]){var e=i.trigger(n,t,fe,r);e&&o.push(e)}}),o.length)return this._engine.markElementAsRemoved(this.id,n,!0,t),e&&H(o).onDone(function(){return i._engine.processLeaveNode(n)}),!0}return!1},de.prototype.prepareLeaveAnimationListeners=function(o){var a=this,t=this._elementListeners.get(o);if(t){var u=new Set;t.forEach(function(t){var e=t.name;if(!u.has(e)){u.add(e);var n=a._triggers[e].fallbackTransition,r=a._engine.statesByElement.get(o)[e]||ye,i=new ce(fe),s=new _e(a.id,e,o);a._engine.totalQueuedPlayers++,a._queue.push({element:o,triggerName:e,transition:n,fromState:r,toState:i,player:s,isFallbackTransition:!0})}})}},de.prototype.removeNode=function(t,e){var n=this,r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e,!0),!this.triggerLeaveAnimation(t,e,!0)){var i=!1;if(r.totalAnimations){var s=r.players.length?r.playersByQueriedElement.get(t):[];if(s&&s.length)i=!0;else for(var o=t;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}this.prepareLeaveAnimationListeners(t),i?r.markElementAsRemoved(this.id,t,!1,e):(r.afterFlush(function(){return n.clearElementCache(t)}),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}},de.prototype.insertNode=function(t,e){ke(t,this._hostClassName)},de.prototype.drainQueuedTransitions=function(i){var s=this,o=[];return this._queue.forEach(function(n){var t=n.player;if(!t.destroyed){var r=n.element,e=s._elementListeners.get(r);e&&e.forEach(function(t){if(t.name==n.triggerName){var e=l(r,n.triggerName,n.fromState.value,n.toState.value);e._data=i,a(n.player,t.phase,e,t.callback)}}),t.markedForDestroy?s._engine.afterFlush(function(){t.destroy()}):o.push(n)}}),this._queue=[],o.sort(function(t,e){var n=t.transition.ast.depCount,r=e.transition.ast.depCount;return 0==n||0==r?n-r:s._engine.driver.containsElement(t.element,e.element)?1:-1})},de.prototype.destroy=function(t){this.players.forEach(function(t){return t.destroy()}),this._signalRemovalForInnerTriggers(this.hostElement,t)},de.prototype.elementContainsData=function(e){var t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(function(t){return t.element===e})||t},de);function de(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ke(e,this._hostClassName)}var ve=(ge.prototype._onRemovalComplete=function(t,e){this.onRemovalComplete(t,e)},Object.defineProperty(ge.prototype,"queuedPlayers",{get:function(){var e=[];return this._namespaceList.forEach(function(t){t.players.forEach(function(t){t.queued&&e.push(t)})}),e},enumerable:!0,configurable:!0}),ge.prototype.createNamespace=function(t,e){var n=new me(t,e,this);return e.parentNode?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n},ge.prototype._balanceNamespaceList=function(t,e){var n=this._namespaceList.length-1;if(0<=n){for(var r=!1,i=n;0<=i;i--){var s=this._namespaceList[i];if(this.driver.containsElement(s.hostElement,e)){this._namespaceList.splice(i+1,0,t),r=!0;break}}r||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t},ge.prototype.register=function(t,e){var n=this._namespaceLookup[t];return n=n||this.createNamespace(t,e)},ge.prototype.registerTrigger=function(t,e,n){var r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++},ge.prototype.destroy=function(e,t){var n=this;if(e){var r=this._fetchNamespace(e);this.afterFlush(function(){n.namespacesByHostElement.delete(r.hostElement),delete n._namespaceLookup[e];var t=n._namespaceList.indexOf(r);0<=t&&n._namespaceList.splice(t,1)}),this.afterFlushAnimationsDone(function(){return r.destroy(t)})}},ge.prototype._fetchNamespace=function(t){return this._namespaceLookup[t]},ge.prototype.fetchNamespacesByElement=function(t){var e=new Set,n=this.statesByElement.get(t);if(n)for(var r=Object.keys(n),i=0;i<r.length;i++){var s=n[r[i]].namespaceId;if(s){var o=this._fetchNamespace(s);o&&e.add(o)}}return e},ge.prototype.trigger=function(t,e,n,r){if(Ee(e)){var i=this._fetchNamespace(t);if(i)return i.trigger(e,n,r),!0}return!1},ge.prototype.insertNode=function(t,e,n,r){if(Ee(e)){var i=e[he];if(i&&i.setForRemoval){i.setForRemoval=!1,i.setForMove=!0;var s=this.collectedLeaveElements.indexOf(e);0<=s&&this.collectedLeaveElements.splice(s,1)}if(t){var o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}},ge.prototype.collectEnterElement=function(t){this.collectedEnterElements.push(t)},ge.prototype.markElementAsDisabled=function(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ke(t,se)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Ae(t,se))},ge.prototype.removeNode=function(t,e,n,r){if(Ee(e)){var i=t?this._fetchNamespace(t):null;if(i?i.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){var s=this.namespacesByHostElement.get(e);s&&s.id!==t&&s.removeNode(e,r)}}else this._onRemovalComplete(e,r)},ge.prototype.markElementAsRemoved=function(t,e,n,r){this.collectedLeaveElements.push(e),e[he]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1}},ge.prototype.listen=function(t,e,n,r,i){return Ee(e)?this._fetchNamespace(t).listen(e,n,r,i):function(){}},ge.prototype._buildInstruction=function(t,e,n,r,i){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,i)},ge.prototype.destroyInnerAnimations=function(t){var e=this,n=this.driver.query(t,N,!0);n.forEach(function(t){return e.destroyActiveAnimationsForElement(t)}),0!=this.playersByQueriedElement.size&&(n=this.driver.query(t,G,!0)).forEach(function(t){return e.finishActiveQueriedAnimationOnElement(t)})},ge.prototype.destroyActiveAnimationsForElement=function(t){var e=this.playersByElement.get(t);e&&e.forEach(function(t){t.queued?t.markedForDestroy=!0:t.destroy()})},ge.prototype.finishActiveQueriedAnimationOnElement=function(t){var e=this.playersByQueriedElement.get(t);e&&e.forEach(function(t){return t.finish()})},ge.prototype.whenRenderingDone=function(){var e=this;return new Promise(function(t){if(e.players.length)return H(e.players).onDone(function(){return t()});t()})},ge.prototype.processLeaveNode=function(t){var e=this,n=t[he];if(n&&n.setForRemoval){if(t[he]=ue,n.namespaceId){this.destroyInnerAnimations(t);var r=this._fetchNamespace(n.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,n.setForRemoval)}this.driver.matchesElement(t,oe)&&this.markElementAsDisabled(t,!1),this.driver.query(t,oe,!0).forEach(function(t){e.markElementAsDisabled(t,!1)})},ge.prototype.flush=function(t){var n=this;void 0===t&&(t=-1);var e=[];if(this.newHostElements.size&&(this.newHostElements.forEach(function(t,e){return n._balanceNamespaceList(t,e)}),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(var r=0;r<this.collectedEnterElements.length;r++)ke(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){var i=[];try{e=this._flushAnimations(i,t)}finally{for(r=0;r<i.length;r++)i[r]()}}else for(r=0;r<this.collectedLeaveElements.length;r++){var s=this.collectedLeaveElements[r];this.processLeaveNode(s)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(function(t){return t()}),this._flushFns=[],this._whenQuietFns.length){var o=this._whenQuietFns;this._whenQuietFns=[],e.length?H(e).onDone(function(){o.forEach(function(t){return t()})}):o.forEach(function(t){return t()})}},ge.prototype.reportError=function(t){throw new Error("Unable to process animations due to the following failed trigger transitions\n "+t.join("\n"))},ge.prototype._flushAnimations=function(t,e){var h=this,c=new _t,p=[],f=new Map,l=[],y=new Map,m=new Map,d=new Map,v=new Set;this.disabledNodes.forEach(function(t){v.add(t);for(var e=h.driver.query(t,".ng-animate-queued",!0),n=0;n<e.length;n++)v.add(e[n])});var g=this.bodyNode,n=Array.from(this.statesByElement.keys()),r=we(n,this.collectedEnterElements),_=new Map,i=0;r.forEach(function(t,e){var n=$+i++;_.set(e,n),t.forEach(function(t){return ke(t,n)})});for(var s=[],o=new Set,a=new Set,u=0;u<this.collectedLeaveElements.length;u++)(q=(x=this.collectedLeaveElements[u])[he])&&q.setForRemoval&&(s.push(x),o.add(x),q.hasAnimation?this.driver.query(x,".ng-star-inserted",!0).forEach(function(t){return o.add(t)}):a.add(x));var S=new Map,E=we(n,Array.from(o));E.forEach(function(t,e){var n=V+i++;S.set(e,n),t.forEach(function(t){return ke(t,n)})}),t.push(function(){r.forEach(function(t,e){var n=_.get(e);t.forEach(function(t){return Ae(t,n)})}),E.forEach(function(t,e){var n=S.get(e);t.forEach(function(t){return Ae(t,n)})}),s.forEach(function(t){h.processLeaveNode(t)})});for(var b=[],T=[],w=this._namespaceList.length-1;0<=w;w--)this._namespaceList[w].drainQueuedTransitions(e).forEach(function(t){var e=t.player,n=t.element;if(b.push(e),h.collectedEnterElements.length){var r=n[he];if(r&&r.setForMove)return void e.destroy()}var i=!g||!h.driver.containsElement(g,n),s=S.get(n),o=_.get(n),a=h._buildInstruction(t,c,o,s,i);if(a.errors&&a.errors.length)T.push(a);else{if(i)return e.onStart(function(){return J(n,a.fromStyles)}),e.onDestroy(function(){return Z(n,a.toStyles)}),void p.push(e);if(t.isFallbackTransition)return e.onStart(function(){return J(n,a.fromStyles)}),e.onDestroy(function(){return Z(n,a.toStyles)}),void p.push(e);a.timelines.forEach(function(t){return t.stretchStartingKeyframe=!0}),c.append(n,a.timelines);var u={instruction:a,player:e,element:n};l.push(u),a.queriedElements.forEach(function(t){return Y(y,t,[]).push(e)}),a.preStyleProps.forEach(function(t,e){var n=Object.keys(t);if(n.length){var r=m.get(e);r||m.set(e,r=new Set),n.forEach(function(t){return r.add(t)})}}),a.postStyleProps.forEach(function(t,e){var n=Object.keys(t),r=d.get(e);r||d.set(e,r=new Set),n.forEach(function(t){return r.add(t)})})}});if(T.length){var P=[];T.forEach(function(t){P.push("@"+t.triggerName+" has failed due to:\n"),t.errors.forEach(function(t){return P.push("- "+t+"\n")})}),b.forEach(function(t){return t.destroy()}),this.reportError(P)}var k=new Map,A=new Map;l.forEach(function(t){var e=t.element;c.has(e)&&(A.set(e,e),h._beforeAnimationBuild(t.player.namespaceId,t.instruction,k))}),p.forEach(function(t){var e=t.element;h._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(function(t){Y(k,e,[]).push(t),t.destroy()})});var N=s.filter(function(t){return Oe(t,m,d)}),O=new Map;Te(O,this.driver,a,d,z.AUTO_STYLE).forEach(function(t){Oe(t,m,d)&&N.push(t)});var C=new Map;r.forEach(function(t,e){Te(C,h.driver,new Set(t),m,z.ɵPRE_STYLE)}),N.forEach(function(t){var e=O.get(t),n=C.get(t);O.set(t,U({},e,n))});var F=[],D=[],L={};l.forEach(function(t){var e=t.element,n=t.player,r=t.instruction;if(c.has(e)){if(v.has(e))return n.onDestroy(function(){return Z(e,r.toStyles)}),n.disabled=!0,n.overrideTotalTime(r.totalTime),void p.push(n);var i=L;if(1<A.size){for(var s=e,o=[];s=s.parentNode;){var a=A.get(s);if(a){i=a;break}o.push(s)}o.forEach(function(t){return A.set(t,i)})}var u=h._buildAnimation(n.namespaceId,r,k,f,C,O);if(n.setRealPlayer(u),i===L)F.push(n);else{var l=h.playersByElement.get(i);l&&l.length&&(n.parentPlayer=H(l)),p.push(n)}}else J(e,r.fromStyles),n.onDestroy(function(){return Z(e,r.toStyles)}),D.push(n),v.has(e)&&p.push(n)}),D.forEach(function(t){var e=f.get(t.element);if(e&&e.length){var n=H(e);t.setRealPlayer(n)}}),p.forEach(function(t){t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(var j=0;j<s.length;j++){var x,q=(x=s[j])[he];if(Ae(x,V),!q||!q.hasAnimation){var R=[];if(y.size){var I=y.get(x);I&&I.length&&R.push.apply(R,W(I));for(var K=this.driver.query(x,G,!0),Q=0;Q<K.length;Q++){var B=y.get(K[Q]);B&&B.length&&R.push.apply(R,W(B))}}var M=R.filter(function(t){return!t.destroyed});M.length?Ne(this,x,M):this.processLeaveNode(x)}}return s.length=0,F.forEach(function(e){h.players.push(e),e.onDone(function(){e.destroy();var t=h.players.indexOf(e);h.players.splice(t,1)}),e.play()}),F},ge.prototype.elementContainsData=function(t,e){var n=!1,r=e[he];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n},ge.prototype.afterFlush=function(t){this._flushFns.push(t)},ge.prototype.afterFlushAnimationsDone=function(t){this._whenQuietFns.push(t)},ge.prototype._getPreviousPlayers=function(t,e,n,r,i){var s=[];if(e){var o=this.playersByQueriedElement.get(t);o&&(s=o)}else{var a=this.playersByElement.get(t);if(a){var u=!i||i==fe;a.forEach(function(t){t.queued||!u&&t.triggerName!=r||s.push(t)})}}return(n||r)&&(s=s.filter(function(t){return!(n&&n!=t.namespaceId||r&&r!=t.triggerName)})),s},ge.prototype._beforeAnimationBuild=function(t,i,s){function e(t){var e=t.element,n=e!==a,r=Y(s,e,[]);h._getPreviousPlayers(e,n,u,l,i.toState).forEach(function(t){var e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),r.push(t)})}var n,r,o=i.triggerName,a=i.element,u=i.isRemovalTransition?void 0:t,l=i.isRemovalTransition?void 0:o,h=this;try{for(var c=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(i.timelines),p=c.next();!p.done;p=c.next())e(p.value)}catch(t){n={error:t}}finally{try{p&&!p.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}J(a,i.fromStyles)},ge.prototype._buildAnimation=function(h,t,c,p,f,y){var m=this,d=t.triggerName,v=t.element,g=[],_=new Set,S=new Set,e=t.timelines.map(function(t){var n=t.element;_.add(n);var e=n[he];if(e&&e.removedBeforeQueried)return new z.NoopAnimationPlayer(t.duration,t.delay);var r=n!==v,i=function(t){var e=[];return function t(e,n){for(var r=0;r<e.length;r++){var i=e[r];i instanceof z.ɵAnimationGroupPlayer?t(i.players,n):n.push(i)}}(t,e),e}((c.get(n)||ae).map(function(t){return t.getRealPlayer()})).filter(function(t){var e=t;return!!e.element&&e.element===n}),s=f.get(n),o=y.get(n),a=E(m.driver,m._normalizer,0,t.keyframes,s,o),u=m._buildPlayer(t,a,i);if(t.subTimeline&&p&&S.add(n),r){var l=new _e(h,d,n);l.setRealPlayer(u),g.push(l)}return u});g.forEach(function(t){Y(m.playersByQueriedElement,t.element,[]).push(t),t.onDone(function(){return function(t,e,n){var r;if(t instanceof Map){if(r=t.get(e)){if(r.length){var i=r.indexOf(n);r.splice(i,1)}0==r.length&&t.delete(e)}}else(r=t[e])&&(r.length&&(i=r.indexOf(n),r.splice(i,1)),0==r.length&&delete t[e]);return r}(m.playersByQueriedElement,t.element,t)})}),_.forEach(function(t){return ke(t,O)});var n=H(e);return n.onDestroy(function(){_.forEach(function(t){return Ae(t,O)}),Z(v,t.toStyles)}),S.forEach(function(t){Y(p,t,[]).push(n)}),n},ge.prototype._buildPlayer=function(t,e,n){return 0<e.length?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new z.NoopAnimationPlayer(t.duration,t.delay)},ge);function ge(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=function(t,e){}}var _e=(Se.prototype.setRealPlayer=function(n){var t=this;this._containsRealPlayer||(this._player=n,Object.keys(this._queuedCallbacks).forEach(function(e){t._queuedCallbacks[e].forEach(function(t){return a(n,e,void 0,t)})}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)},Se.prototype.getRealPlayer=function(){return this._player},Se.prototype.overrideTotalTime=function(t){this.totalTime=t},Se.prototype.syncPlayerEvents=function(t){var e=this,n=this._player;n.triggerCallback&&t.onStart(function(){return n.triggerCallback("start")}),t.onDone(function(){return e.finish()}),t.onDestroy(function(){return e.destroy()})},Se.prototype._queueEvent=function(t,e){Y(this._queuedCallbacks,t,[]).push(e)},Se.prototype.onDone=function(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)},Se.prototype.onStart=function(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)},Se.prototype.onDestroy=function(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)},Se.prototype.init=function(){this._player.init()},Se.prototype.hasStarted=function(){return!this.queued&&this._player.hasStarted()},Se.prototype.play=function(){this.queued||this._player.play()},Se.prototype.pause=function(){this.queued||this._player.pause()},Se.prototype.restart=function(){this.queued||this._player.restart()},Se.prototype.finish=function(){this._player.finish()},Se.prototype.destroy=function(){this.destroyed=!0,this._player.destroy()},Se.prototype.reset=function(){this.queued||this._player.reset()},Se.prototype.setPosition=function(t){this.queued||this._player.setPosition(t)},Se.prototype.getPosition=function(){return this.queued?0:this._player.getPosition()},Se.prototype.triggerCallback=function(t){var e=this._player;e.triggerCallback&&e.triggerCallback(t)},Se);function Se(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new z.NoopAnimationPlayer,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}function Ee(t){return t&&1===t.nodeType}function be(t,e){var n=t.style.display;return t.style.display=null!=e?e:"none",n}function Te(e,i,t,n,s){var r=[];t.forEach(function(t){return r.push(be(t))});var o=[];n.forEach(function(t,n){var r={};t.forEach(function(t){var e=r[t]=i.computeStyle(n,t,s);e&&0!=e.length||(n[he]=le,o.push(n))}),e.set(n,r)});var a=0;return t.forEach(function(t){return be(t,r[a++])}),o}function we(t,e){var i=new Map;if(t.forEach(function(t){return i.set(t,[])}),0==e.length)return i;var s=1,o=new Set(e),a=new Map;return e.forEach(function(t){var e=function t(e){if(!e)return s;var n=a.get(e);if(n)return n;var r=e.parentNode;return n=i.has(r)?r:o.has(r)?s:t(r),a.set(e,n),n}(t);e!==s&&i.get(e).push(t)}),i}var Pe="$$classes";function ke(t,e){if(t.classList)t.classList.add(e);else{var n=t[Pe];(n=n||(t[Pe]={}))[e]=!0}}function Ae(t,e){if(t.classList)t.classList.remove(e);else{var n=t[Pe];n&&delete n[e]}}function Ne(t,e,n){H(n).onDone(function(){return t.processLeaveNode(e)})}function Oe(t,e,n){var r=n.get(t);if(!r)return!1;var i=e.get(t);return i?r.forEach(function(t){return i.add(t)}):e.set(t,r),n.delete(t),!0}var Ce=(Fe.prototype.registerTrigger=function(t,e,n,r,i){var s=t+"-"+r,o=this._triggerCache[s];if(!o){var a=[],u=ct(this._driver,i,a);if(a.length)throw new Error('The animation trigger "'+r+'" has failed to build due to the following errors:\n - '+a.join("\n - "));o=function(t,e){return new Jt(t,e)}(r,u),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,r,o)},Fe.prototype.register=function(t,e){this._transitionEngine.register(t,e)},Fe.prototype.destroy=function(t,e){this._transitionEngine.destroy(t,e)},Fe.prototype.onInsert=function(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)},Fe.prototype.onRemove=function(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)},Fe.prototype.disableAnimations=function(t,e){this._transitionEngine.markElementAsDisabled(t,e)},Fe.prototype.process=function(t,e,n,r){if("@"==n.charAt(0)){var i=u(h(n),2),s=i[0],o=i[1],a=r;this._timelineEngine.command(s,e,o,a)}else this._transitionEngine.trigger(t,e,n,r)},Fe.prototype.listen=function(t,e,n,r,i){if("@"!=n.charAt(0))return this._transitionEngine.listen(t,e,n,r,i);var s=u(h(n),2),o=s[0],a=s[1];return this._timelineEngine.listen(o,e,a,i)},Fe.prototype.flush=function(t){void 0===t&&(t=-1),this._transitionEngine.flush(t)},Object.defineProperty(Fe.prototype,"players",{get:function(){return this._transitionEngine.players.concat(this._timelineEngine.players)},enumerable:!0,configurable:!0}),Fe.prototype.whenRenderingDone=function(){return this._transitionEngine.whenRenderingDone()},Fe);function Fe(t,e,n){var r=this;this.bodyNode=t,this._driver=e,this._triggerCache={},this.onRemovalComplete=function(t,e){},this._transitionEngine=new ve(t,e,n),this._timelineEngine=new ne(t,e,n),this._transitionEngine.onRemovalComplete=function(t,e){return r.onRemovalComplete(t,e)}}function De(t,e){var n=null,r=null;return Array.isArray(e)&&e.length?(n=xe(e[0]),1<e.length&&(r=xe(e[e.length-1]))):e&&(n=xe(e)),n||r?new Le(t,n,r):null}var Le=(je.prototype.start=function(){this._state<1&&(this._startStyles&&Z(this._element,this._startStyles,this._initialStyles),this._state=1)},je.prototype.finish=function(){this.start(),this._state<2&&(Z(this._element,this._initialStyles),this._endStyles&&(Z(this._element,this._endStyles),this._endStyles=null),this._state=1)},je.prototype.destroy=function(){this.finish(),this._state<3&&(je.initialStylesByElement.delete(this._element),this._startStyles&&(J(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(J(this._element,this._endStyles),this._endStyles=null),Z(this._element,this._initialStyles),this._state=3)},je.initialStylesByElement=new WeakMap,je);function je(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;var r=je.initialStylesByElement.get(t);r||je.initialStylesByElement.set(t,r={}),this._initialStyles=r}function xe(t){for(var e,n=null,r=Object.keys(t),i=0;i<r.length;i++){var s=r[i];"display"!==(e=s)&&"position"!==e||((n=n||{})[s]=t[s])}return n}var qe="animation",Re="animationend",Ie=(Ke.prototype.apply=function(){!function(t,e){var n=We(t,"").trim();n.length&&(function(t,e){for(var n=0,r=0;r<t.length;r++)t.charAt(r)===e&&n++}(n,","),e=n+", "+e),Ue(t,"",e)}(this._element,this._duration+"ms "+this._easing+" "+this._delay+"ms 1 normal "+this._fillMode+" "+this._name),ze(this._element,this._eventFn,!1),this._startTime=Date.now()},Ke.prototype.pause=function(){Qe(this._element,this._name,"paused")},Ke.prototype.resume=function(){Qe(this._element,this._name,"running")},Ke.prototype.setPosition=function(t){var e=Be(this._element,this._name);this._position=t*this._duration,Ue(this._element,"Delay","-"+this._position+"ms",e)},Ke.prototype.getPosition=function(){return this._position},Ke.prototype._handleCallback=function(t){var e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()},Ke.prototype.finish=function(){this._finished||(this._finished=!0,this._onDoneFn(),ze(this._element,this._eventFn,!0))},Ke.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){var n=We(t,"").split(","),r=Me(n,e);if(0<=r){n.splice(r,1);var i=n.join(",");Ue(t,"",i)}}(this._element,this._name))},Ke);function Ke(t,e,n,r,i,s,o){var a=this;this._element=t,this._name=e,this._duration=n,this._delay=r,this._easing=i,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=function(t){return a._handleCallback(t)}}function Qe(t,e,n){Ue(t,"PlayState",n,Be(t,e))}function Be(t,e){var n=We(t,"");return 0<n.indexOf(",")?Me(n.split(","),e):Me([n],e)}function Me(t,e){for(var n=0;n<t.length;n++)if(0<=t[n].indexOf(e))return n;return-1}function ze(t,e,n){n?t.removeEventListener(Re,e):t.addEventListener(Re,e)}function Ue(t,e,n,r){var i=qe+e;if(null!=r){var s=t.style[i];if(s.length){var o=s.split(",");o[r]=n,n=o.join(",")}}t.style[i]=n}function We(t,e){return t.style[qe+e]}var He=(Ye.prototype.onStart=function(t){this._onStartFns.push(t)},Ye.prototype.onDone=function(t){this._onDoneFns.push(t)},Ye.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},Ye.prototype.destroy=function(){this.init(),4<=this._state||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},Ye.prototype._flushDoneFns=function(){this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[]},Ye.prototype._flushStartFns=function(){this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[]},Ye.prototype.finish=function(){this.init(),3<=this._state||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())},Ye.prototype.setPosition=function(t){this._styler.setPosition(t)},Ye.prototype.getPosition=function(){return this._styler.getPosition()},Ye.prototype.hasStarted=function(){return 2<=this._state},Ye.prototype.init=function(){1<=this._state||(this._state=1,this.element,this._styler.apply(),this._delay&&this._styler.pause())},Ye.prototype.play=function(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()},Ye.prototype.pause=function(){this.init(),this._styler.pause()},Ye.prototype.restart=function(){this.reset(),this.play()},Ye.prototype.reset=function(){this._styler.destroy(),this._buildStyler(),this._styler.apply()},Ye.prototype._buildStyler=function(){var t=this;this._styler=new Ie(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",function(){return t.finish()})},Ye.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},Ye.prototype.beforeDestroy=function(){var e=this;this.init();var n={};if(this.hasStarted()){var r=3<=this._state;Object.keys(this._finalStyles).forEach(function(t){"offset"!=t&&(n[t]=r?e._finalStyles[t]:it(e.element,t))})}this.currentSnapshot=n},Ye);function Ye(t,e,n,r,i,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=r,this._delay=i,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=r+i,this._buildStyler()}var $e,Ve=(n(Ge,$e=z.NoopAnimationPlayer),Ge.prototype.init=function(){var e=this;!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(function(t){e._startingStyles[t]=e.element.style[t]}),$e.prototype.init.call(this))},Ge.prototype.play=function(){var e=this;this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(function(t){return e.element.style.setProperty(t,e._styles[t])}),$e.prototype.play.call(this))},Ge.prototype.destroy=function(){var n=this;this._startingStyles&&(Object.keys(this._startingStyles).forEach(function(t){var e=n._startingStyles[t];e?n.element.style.setProperty(t,e):n.element.style.removeProperty(t)}),this._startingStyles=null,$e.prototype.destroy.call(this))},Ge);function Ge(t,e){var n=$e.call(this)||this;return n.element=t,n._startingStyles={},n.__initialized=!1,n._styles=S(e),n}var Ze=(Je.prototype.validateStyleProperty=function(t){return d(t)},Je.prototype.matchesElement=function(t,e){return v(t,e)},Je.prototype.containsElement=function(t,e){return g(t,e)},Je.prototype.query=function(t,e,n){return _(t,e,n)},Je.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},Je.prototype.buildKeyframeElement=function(t,e,n){n=n.map(function(t){return S(t)});var r="@keyframes "+e+" {\n",i="";n.forEach(function(n){i=" ";var t=parseFloat(n.offset);r+=""+i+100*t+"% {\n",i+=" ",Object.keys(n).forEach(function(t){var e=n[t];switch(t){case"offset":return;case"easing":return void(e&&(r+=i+"animation-timing-function: "+e+";\n"));default:return void(r+=""+i+t+": "+e+";\n")}}),r+=i+"}\n"}),r+="}\n";var s=document.createElement("style");return s.innerHTML=r,s},Je.prototype.animate=function(t,e,n,r,i,s,o){void 0===s&&(s=[]),o&&this._notifyFaultyScrubber();var a=s.filter(function(t){return t instanceof He}),u={};et(n,r)&&a.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var l=function(t){var n={};return t&&(Array.isArray(t)?t:[t]).forEach(function(e){Object.keys(e).forEach(function(t){"offset"!=t&&"easing"!=t&&(n[t]=e[t])})}),n}(e=nt(t,e,u));if(0==n)return new Ve(t,l);var h="gen_css_kf_"+this._count++,c=this.buildKeyframeElement(t,h,e);document.querySelector("head").appendChild(c);var p=De(t,e),f=new He(t,e,h,n,r,i,l,p);return f.onDestroy(function(){return function(t){t.parentNode.removeChild(t)}(c)}),f},Je.prototype._notifyFaultyScrubber=function(){this._warningIssued||(console.warn("@angular/animations: please load the web-animations.js polyfill to allow programmatic access...\n","  visit http://bit.ly/IWukam to learn more about using the web-animation-js polyfill."),this._warningIssued=!0)},Je);function Je(){this._count=0,this._head=document.querySelector("head"),this._warningIssued=!1}var Xe=(tn.prototype._onFinish=function(){this._finished||(this._finished=!0,this._onDoneFns.forEach(function(t){return t()}),this._onDoneFns=[])},tn.prototype.init=function(){this._buildPlayer(),this._preparePlayerBeforeStart()},tn.prototype._buildPlayer=function(){var t=this;if(!this._initialized){this._initialized=!0;var e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",function(){return t._onFinish()})}},tn.prototype._preparePlayerBeforeStart=function(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()},tn.prototype._triggerWebAnimation=function(t,e,n){return t.animate(e,n)},tn.prototype.onStart=function(t){this._onStartFns.push(t)},tn.prototype.onDone=function(t){this._onDoneFns.push(t)},tn.prototype.onDestroy=function(t){this._onDestroyFns.push(t)},tn.prototype.play=function(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(function(t){return t()}),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()},tn.prototype.pause=function(){this.init(),this.domPlayer.pause()},tn.prototype.finish=function(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()},tn.prototype.reset=function(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1},tn.prototype._resetDomPlayerState=function(){this.domPlayer&&this.domPlayer.cancel()},tn.prototype.restart=function(){this.reset(),this.play()},tn.prototype.hasStarted=function(){return this._started},tn.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(function(t){return t()}),this._onDestroyFns=[])},tn.prototype.setPosition=function(t){this.domPlayer.currentTime=t*this.time},tn.prototype.getPosition=function(){return this.domPlayer.currentTime/this.time},Object.defineProperty(tn.prototype,"totalTime",{get:function(){return this._delay+this._duration},enumerable:!0,configurable:!0}),tn.prototype.beforeDestroy=function(){var e=this,n={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(function(t){"offset"!=t&&(n[t]=e._finished?e._finalKeyframe[t]:it(e.element,t))}),this.currentSnapshot=n},tn.prototype.triggerCallback=function(t){var e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(function(t){return t()}),e.length=0},tn);function tn(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}var en=(nn.prototype.validateStyleProperty=function(t){return d(t)},nn.prototype.matchesElement=function(t,e){return v(t,e)},nn.prototype.containsElement=function(t,e){return g(t,e)},nn.prototype.query=function(t,e,n){return _(t,e,n)},nn.prototype.computeStyle=function(t,e,n){return window.getComputedStyle(t)[e]},nn.prototype.overrideWebAnimationsSupport=function(t){this._isNativeImpl=t},nn.prototype.animate=function(t,e,n,r,i,s,o){if(void 0===s&&(s=[]),!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,r,i,s);var a={duration:n,delay:r,fill:0==r?"both":"forwards"};i&&(a.easing=i);var u={},l=s.filter(function(t){return t instanceof Xe});et(n,r)&&l.forEach(function(t){var e=t.currentSnapshot;Object.keys(e).forEach(function(t){return u[t]=e[t]})});var h=De(t,e=nt(t,e=e.map(function(t){return x(t,!1)}),u));return new Xe(t,e,a,h)},nn);function nn(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(rn().toString()),this._cssKeyframesDriver=new Ze}function rn(){return"undefined"!=typeof window&&void 0!==window.document&&Element.prototype.animate||{}}t.ɵangular_packages_animations_browser_browser_a=Le,t.AnimationDriver=w,t.ɵAnimationDriver=w,t.ɵAnimation=xt,t.ɵAnimationStyleNormalizer=Rt,t.ɵNoopAnimationStyleNormalizer=It,t.ɵWebAnimationsStyleNormalizer=Bt,t.ɵNoopAnimationDriver=b,t.ɵAnimationEngine=Ce,t.ɵCssKeyframesDriver=Ze,t.ɵCssKeyframesPlayer=He,t.ɵcontainsElement=g,t.ɵinvokeQuery=_,t.ɵmatchesElement=v,t.ɵvalidateStyleProperty=d,t.ɵWebAnimationsDriver=en,t.ɵsupportsWebAnimations=function(){return"function"==typeof rn()},t.ɵWebAnimationsPlayer=Xe,t.ɵallowPreviousPlayerStylesMerge=et,Object.defineProperty(t,"__esModule",{value:!0})});