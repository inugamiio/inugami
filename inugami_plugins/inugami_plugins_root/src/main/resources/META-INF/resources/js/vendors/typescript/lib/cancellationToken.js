"use strict";var fs=require("fs");function pipeExists(e){try{return fs.statSync(e),!0}catch(e){return!1}}function createCancellationToken(e){for(var t,n=0;n<e.length-1;n++)if("--cancellationPipeName"===e[n]){t=e[n+1];break}if(!t)return{isCancellationRequested:function(){return!1},setRequest:function(e){},resetRequest:function(e){}};if("*"!==t.charAt(t.length-1))return{isCancellationRequested:function(){return pipeExists(t)},setRequest:function(e){},resetRequest:function(e){}};var r,i,a=t.slice(0,-1);if(0===a.length||0<=a.indexOf("*"))throw new Error("Invalid name for template cancellation pipe: it should have length greater than 2 characters and contain only one '*'.");return{isCancellationRequested:function(){return void 0!==r&&pipeExists(r)},setRequest:function(e){r=a+(i=e)},resetRequest:function(e){if(i!==e)throw new Error("Mismatched request id, expected "+i+", actual "+e);r=void 0}}}module.exports=createCancellationToken;