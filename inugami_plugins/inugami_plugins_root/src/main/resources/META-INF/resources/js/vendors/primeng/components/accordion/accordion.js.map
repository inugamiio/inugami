{"version":3,"file":"accordion.js","sourceRoot":"","sources":["accordion.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterContentInit,Input,Output,EventEmitter,ContentChildren,QueryList} from '@angular/core';\nimport {trigger,state,style,transition,animate} from '@angular/animations';\nimport {CommonModule} from '@angular/common';\nimport {Header} from '../common/shared';\nimport {BlockableUI} from '../common/api';\n\n@Component({\n    selector: 'p-accordion',\n    template: `\n        <div [ngClass]=\"'ui-accordion ui-widget ui-helper-reset'\" [ngStyle]=\"style\" [class]=\"styleClass\">\n            <ng-content></ng-content>\n        </div>\n    `,\n})\nexport class Accordion implements BlockableUI {\n    \n    @Input() multiple: boolean;\n    \n    @Output() onClose: EventEmitter<any> = new EventEmitter();\n\n    @Output() onOpen: EventEmitter<any> = new EventEmitter();\n\n    @Input() style: any;\n    \n    @Input() styleClass: string;\n    \n    @Input() lazy: boolean;\n    \n    public tabs: AccordionTab[] = [];\n\n    constructor(public el: ElementRef) {}\n\n    addTab(tab: AccordionTab) {\n        this.tabs.push(tab);\n    }   \n    \n    getBlockableElement(): HTMLElementÂ {\n        return this.el.nativeElement.children[0];\n    } \n}\n\n@Component({\n    selector: 'p-accordionTab',\n    template: `\n        <div class=\"ui-accordion-header ui-state-default ui-corner-all\" [ngClass]=\"{'ui-state-active': selected,'ui-state-disabled':disabled}\"\n            (click)=\"toggle($event)\">\n            <span class=\"fa fa-fw\" [ngClass]=\"{'fa-caret-down': selected, 'fa-caret-right': !selected}\"></span>\n            <a href=\"#\" *ngIf=\"!hasHeaderFacet\" role=\"tab\" [attr.aria-expanded]=\"selected\" [attr.aria-selected]=\"selected\">{{header}}</a>\n            <a href=\"#\" *ngIf=\"hasHeaderFacet\" role=\"tab\" [attr.aria-expanded]=\"selected\" [attr.aria-selected]=\"selected\">\n                <ng-content select=\"p-header\"></ng-content>\n            </a>\n        </div>\n        <div class=\"ui-accordion-content-wrapper\" [@tabContent]=\"selected ? 'visible' : 'hidden'\" (@tabContent.done)=\"onToggleDone($event)\"\n            [ngClass]=\"{'ui-accordion-content-wrapper-overflown': !selected||animating}\" role=\"tabpanel\" [attr.aria-hidden]=\"!selected\">\n            <div class=\"ui-accordion-content ui-widget-content\" *ngIf=\"lazy ? selected : true\">\n                <ng-content></ng-content>\n            </div>\n        </div>\n    `,\n    animations: [\n        trigger('tabContent', [\n            state('hidden', style({\n                height: '0'\n            })),\n            state('visible', style({\n                height: '*'\n            })),\n            transition('visible <=> hidden', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\n        ])\n    ]\n})\nexport class AccordionTab {\n\n    @Input() header: string;\n\n    @Input() selected: boolean;\n\n    @Input() disabled: boolean;\n    \n    @Output() selectedChange: EventEmitter<any> = new EventEmitter();\n\n    @ContentChildren(Header) headerFacet: QueryList<AccordionTab>;\n    \n    public animating: boolean;\n    \n    constructor(public accordion: Accordion) {\n        this.accordion.addTab(this);\n    }\n\n    toggle(event) {\n        if(this.disabled || this.animating) {\n            return false;\n        }\n        \n        this.animating = true;\n        let index = this.findTabIndex();\n\n        if(this.selected) {\n            this.selected = false;\n            this.accordion.onClose.emit({originalEvent: event, index: index});\n        }\n        else {\n            if(!this.accordion.multiple) {\n                for(var i = 0; i < this.accordion.tabs.length; i++) {\n                    this.accordion.tabs[i].selected = false;\n                    this.accordion.tabs[i].selectedChange.emit(false);\n                }\n            }\n\n            this.selected = true;\n            this.accordion.onOpen.emit({originalEvent: event, index: index});\n        }\n        \n        this.selectedChange.emit(this.selected);\n        \n        event.preventDefault();\n    }\n\n    findTabIndex() {\n        let index = -1;\n        for(var i = 0; i < this.accordion.tabs.length; i++) {\n            if(this.accordion.tabs[i] == this) {\n                index = i;\n                break;\n            }\n        }\n        return index;\n    }\n    \n    get lazy(): boolean {\n        return this.accordion.lazy;\n    }\n    \n    get hasHeaderFacet(): boolean {\n        return this.headerFacet && this.headerFacet.length > 0;\n    }\n    \n    onToggleDone(event: Event) {\n        this.animating = false;\n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [Accordion,AccordionTab],\n    declarations: [Accordion,AccordionTab]\n})\nexport class AccordionModule { }\n"]}