{"version":3,"file":"contextmenu.js","sourceRoot":"","sources":["contextmenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,Renderer2,EventEmitter,Inject,forwardRef,ViewChild} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {DomHandler} from '../dom/domhandler';\nimport {MenuItem} from '../common/api';\nimport {Location} from '@angular/common';\nimport {RouterModule} from '@angular/router';\n\n@Component({\n    selector: 'p-contextMenuSub',\n    template: `\n        <ul [ngClass]=\"{'ui-helper-reset':root, 'ui-widget-content ui-corner-all ui-helper-clearfix ui-menu-child ui-shadow':!root}\" class=\"ui-menu-list\"\n            (click)=\"listClick($event)\">\n            <ng-template ngFor let-child [ngForOf]=\"(root ? item : item.items)\">\n                <li #item [ngClass]=\"{'ui-menuitem ui-widget ui-corner-all':true,'ui-menu-parent':child.items,'ui-menuitem-active':item==activeItem}\"\n                    (mouseenter)=\"onItemMouseEnter($event,item,child)\" (mouseleave)=\"onItemMouseLeave($event,item)\" [style.display]=\"child.visible === false ? 'none' : 'block'\">\n                    <a *ngIf=\"!child.routerLink\" [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"child.target\"\n                        [ngClass]=\"{'ui-state-disabled':child.disabled}\" (click)=\"itemClick($event, child)\">\n                        <span class=\"ui-submenu-icon fa fa-fw fa-caret-right\" *ngIf=\"child.items\"></span>\n                        <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"child.icon\" [ngClass]=\"child.icon\"></span>\n                        <span class=\"ui-menuitem-text\">{{child.label}}</span>\n                    </a>\n                    <a *ngIf=\"child.routerLink\" [routerLink]=\"child.routerLink\" [routerLinkActive]=\"'ui-state-active'\" [routerLinkActiveOptions]=\"child.routerLinkActiveOptions||{exact:false}\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"child.target\"\n                        [ngClass]=\"{'ui-state-disabled':child.disabled}\" (click)=\"itemClick($event, child)\">\n                        <span class=\"ui-submenu-icon fa fa-fw fa-caret-right\" *ngIf=\"child.items\"></span>\n                        <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"child.icon\" [ngClass]=\"child.icon\"></span>\n                        <span class=\"ui-menuitem-text\">{{child.label}}</span>\n                    </a>\n                    <p-contextMenuSub class=\"ui-submenu\" [item]=\"child\" *ngIf=\"child.items\"></p-contextMenuSub>\n                </li>\n            </ng-template>\n        </ul>\n    `,\n    providers: [DomHandler]\n})\nexport class ContextMenuSub {\n\n    @Input() item: MenuItem;\n    \n    @Input() root: boolean;\n    \n    constructor(public domHandler: DomHandler, @Inject(forwardRef(() => ContextMenu)) public contextMenu: ContextMenu) {}\n        \n    activeItem: any;\n\n    containerLeft: any;\n                \n    onItemMouseEnter(event, item, menuitem) {\n        if(menuitem.disabled) {\n            return;\n        }\n        \n        this.activeItem = item;\n        let nextElement =  item.children[0].nextElementSibling;\n        if(nextElement) {\n            let sublist = nextElement.children[0];\n            sublist.style.zIndex = ++DomHandler.zindex;\n            this.position(sublist, item);\n        }\n    }\n    \n    onItemMouseLeave(event, link) {\n        this.activeItem = null;\n    }\n    \n    itemClick(event, item: MenuItem) {\n        if(item.disabled) {\n            event.preventDefault();\n            return;\n        }\n        \n        if(!item.url) {\n            event.preventDefault();\n        }\n        \n        if(item.command) {\n            if(!item.eventEmitter) {\n                item.eventEmitter = new EventEmitter();\n                item.eventEmitter.subscribe(item.command);\n            }\n            \n            item.eventEmitter.emit({\n                originalEvent: event,\n                item: item\n            });\n        }\n    }\n    \n    listClick(event) {\n        this.activeItem = null;\n    }\n    \n    position(sublist, item) {\n        this.containerLeft = this.domHandler.getOffset(item.parentElement)\n        let viewport = this.domHandler.getViewport();\n        let sublistWidth = sublist.offsetParent ? sublist.offsetWidth: this.domHandler.getHiddenElementOuterWidth(sublist);\n        let itemOuterWidth = this.domHandler.getOuterWidth(item.children[0]);\n\n        sublist.style.top = '0px';\n\n        if((parseInt(this.containerLeft.left) + itemOuterWidth + sublistWidth) > (viewport.width - this.calculateScrollbarWidth())) {\n            sublist.style.left = -sublistWidth + 'px';\n        }\n        else {\n            sublist.style.left = itemOuterWidth + 'px';\n        }\n    }\n\n    calculateScrollbarWidth(): number {\n        let scrollDiv = document.createElement(\"div\");\n        scrollDiv.className = \"ui-scrollbar-measure\";\n        document.body.appendChild(scrollDiv);\n\n        let scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        document.body.removeChild(scrollDiv);\n        \n        return scrollbarWidth;\n    }\n}\n\n@Component({\n    selector: 'p-contextMenu',\n    template: `\n        <div #container [ngClass]=\"'ui-contextmenu ui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix ui-menu-dynamic ui-shadow'\" \n            [class]=\"styleClass\" [ngStyle]=\"style\" [style.display]=\"visible ? 'block' : 'none'\">\n            <p-contextMenuSub [item]=\"model\" root=\"root\"></p-contextMenuSub>\n        </div>\n    `,\n    providers: [DomHandler]\n})\nexport class ContextMenu implements AfterViewInit,OnDestroy {\n\n    @Input() model: MenuItem[];\n    \n    @Input() global: boolean;\n    \n    @Input() target: any;\n\n    @Input() style: any;\n\n    @Input() styleClass: string;\n    \n    @Input() appendTo: any;\n    \n    @ViewChild('container') containerViewChild: ElementRef;\n    \n    container: HTMLDivElement;\n    \n    visible: boolean;\n            \n    documentClickListener: any;\n    \n    rightClickListener: any;\n        \n    constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer2) {}\n\n    ngAfterViewInit() {\n        this.container = <HTMLDivElement> this.containerViewChild.nativeElement;\n        \n        this.documentClickListener = this.renderer.listen('document', 'click', () => {\n            this.hide();\n        });\n        \n        if(this.global) {\n            this.rightClickListener = this.renderer.listen('document', 'contextmenu', (event) => {\n                this.show(event);\n                event.preventDefault();\n            });\n        }\n        else if(this.target) {\n            this.rightClickListener = this.renderer.listen(this.target, 'contextmenu', (event) => {\n                this.show(event);\n                event.preventDefault();\n                event.stopPropagation();\n            });\n        }\n        \n        if(this.appendTo) {\n            if(this.appendTo === 'body')\n                document.body.appendChild(this.container);\n            else\n                this.domHandler.appendChild(this.container, this.appendTo);\n        }\n    }\n        \n    show(event?: MouseEvent) {\n        this.position(event);\n        this.visible = true;\n        this.domHandler.fadeIn(this.container, 250);\n        \n        if(event) {\n            event.preventDefault();\n        }\n    }\n    \n    hide() {\n        this.visible = false;\n    }\n    \n    toggle(event?: MouseEvent) {\n        if(this.visible)\n            this.hide();\n        else\n            this.show(event);\n    }\n    \n    position(event?: MouseEvent) {\n        if(event) {\n            let left = event.pageX + 1;\n            let top = event.pageY + 1;\n            let width = this.container.offsetParent ? this.container.offsetWidth: this.domHandler.getHiddenElementOuterWidth(this.container);\n            let height = this.container.offsetParent ? this.container.offsetHeight: this.domHandler.getHiddenElementOuterHeight(this.container);\n            let viewport = this.domHandler.getViewport();\n            \n            //flip\n            if(left + width - document.body.scrollLeft > viewport.width) {\n                left -= width;\n            }\n            \n            //flip\n            if(top + height - document.body.scrollTop > viewport.height) {\n                top -= height;\n            }\n            \n            //fit\n            if(left < document.body.scrollLeft) {\n                left = document.body.scrollLeft;\n            }\n            \n            //fit\n            if(top < document.body.scrollTop) {\n                top = document.body.scrollTop;\n            }\n                \n            this.container.style.left = left + 'px';\n            this.container.style.top = top + 'px';\n        }\n    }\n\n    unsubscribe(item: any) {\n        if(item.eventEmitter) {\n            item.eventEmitter.unsubscribe();\n        }\n        \n        if(item.items) {\n            for(let childItem of item.items) {\n                this.unsubscribe(childItem);\n            }\n        }\n    }\n        \n    ngOnDestroy() {\n        if(this.documentClickListener) {\n            this.documentClickListener();\n        }\n        \n        if(this.rightClickListener) {\n            this.rightClickListener();\n        }\n        \n        if(this.model) {\n            for(let item of this.model) {\n                this.unsubscribe(item);\n            }\n        }\n        \n        if(this.appendTo) {\n            this.el.nativeElement.appendChild(this.container);\n        }\n    }\n\n}\n\n@NgModule({\n    imports: [CommonModule,RouterModule],\n    exports: [ContextMenu,RouterModule],\n    declarations: [ContextMenu,ContextMenuSub]\n})\nexport class ContextMenuModule { }"]}