{"version":3,"file":"tieredmenu.js","sourceRoot":"","sources":["tieredmenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,Renderer2,EventEmitter} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {DomHandler} from '../dom/domhandler';\nimport {MenuItem} from '../common/api';\nimport {RouterModule} from '@angular/router';\n\n@Component({\n    selector: 'p-tieredMenuSub',\n    template: `\n        <ul [ngClass]=\"{'ui-helper-reset':root, 'ui-widget-content ui-corner-all ui-helper-clearfix ui-menu-child ui-shadow':!root}\" class=\"ui-menu-list\"\n            (click)=\"listClick($event)\">\n            <ng-template ngFor let-child [ngForOf]=\"(root ? item : item.items)\">\n                <li #listItem [ngClass]=\"{'ui-menuitem ui-widget ui-corner-all':true,'ui-menu-parent':child.items,'ui-menuitem-active':listItem==activeItem}\"\n                    (mouseenter)=\"onItemMouseEnter($event, listItem, child)\" (mouseleave)=\"onItemMouseLeave($event)\">\n                    <a *ngIf=\"!child.routerLink\" [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"child.target\"\n                        [ngClass]=\"{'ui-state-disabled':child.disabled}\" (click)=\"itemClick($event, child)\">\n                        <span class=\"ui-submenu-icon fa fa-fw fa-caret-right\" *ngIf=\"child.items\"></span>\n                        <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"child.icon\" [ngClass]=\"child.icon\"></span>\n                        <span class=\"ui-menuitem-text\">{{child.label}}</span>\n                    </a>\n                    <a *ngIf=\"child.routerLink\" [routerLink]=\"child.routerLink\" [routerLinkActive]=\"'ui-state-active'\" [routerLinkActiveOptions]=\"child.routerLinkActiveOptions||{exact:false}\" [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"child.target\"\n                        [ngClass]=\"{'ui-state-disabled':child.disabled}\" (click)=\"itemClick($event, child)\">\n                        <span class=\"ui-submenu-icon fa fa-fw fa-caret-right\" *ngIf=\"child.items\"></span>\n                        <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"child.icon\" [ngClass]=\"child.icon\"></span>\n                        <span class=\"ui-menuitem-text\">{{child.label}}</span>\n                    </a>\n                    <p-tieredMenuSub class=\"ui-submenu\" [item]=\"child\" *ngIf=\"child.items\"></p-tieredMenuSub>\n                </li>\n            </ng-template>\n        </ul>\n    `,\n    providers: [DomHandler]\n})\nexport class TieredMenuSub {\n\n    @Input() item: MenuItem;\n    \n    @Input() root: boolean;\n    \n    constructor(public domHandler: DomHandler) {}\n    \n    activeItem: HTMLLIElement;\n                \n    onItemMouseEnter(event: Event, item: HTMLLIElement, menuitem: MenuItem) {\n        if(menuitem.disabled) {\n            return;\n        }\n        \n        this.activeItem = item;\n        let nextElement:  HTMLElement =  <HTMLElement> item.children[0].nextElementSibling;\n        if(nextElement) {\n            let sublist:  HTMLElement = <HTMLElement> nextElement.children[0];\n            sublist.style.zIndex = String(++DomHandler.zindex);\n                        \n            sublist.style.top = '0px';\n            sublist.style.left = this.domHandler.getOuterWidth(item.children[0]) + 'px';\n        }\n    }\n    \n    onItemMouseLeave(event: Event) {\n        this.activeItem = null;\n    }\n    \n    itemClick(event: Event, item: MenuItem)Â {\n        if(item.disabled) {\n            event.preventDefault();\n            return true;\n        }\n        \n        if(!item.url) {\n            event.preventDefault();\n        }\n        \n        if(item.command) {\n            if(!item.eventEmitter) {\n                item.eventEmitter = new EventEmitter();\n                item.eventEmitter.subscribe(item.command);\n            }\n            \n            item.eventEmitter.emit({\n                originalEvent: event,\n                item: item\n            });\n        }\n    }\n    \n    listClick(event: Event) {\n        this.activeItem = null;\n    }\n}\n\n@Component({\n    selector: 'p-tieredMenu',\n    template: `\n        <div [ngClass]=\"{'ui-tieredmenu ui-menu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix':true,'ui-menu-dynamic ui-shadow':popup}\" \n            [class]=\"styleClass\" [ngStyle]=\"style\">\n            <p-tieredMenuSub [item]=\"model\" root=\"root\"></p-tieredMenuSub>\n        </div>\n    `,\n    providers: [DomHandler]\n})\nexport class TieredMenu implements AfterViewInit,OnDestroy {\n\n    @Input() model: MenuItem[];\n\n    @Input() popup: boolean;\n\n    @Input() style: any;\n\n    @Input() styleClass: string;\n    \n    container: any;\n    \n    documentClickListener: any;\n    \n    preventDocumentDefault: any;\n    \n    constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer2) {}\n\n    ngAfterViewInit() {\n        this.container = this.el.nativeElement.children[0];\n        \n        if(this.popup) {\n            this.documentClickListener = this.renderer.listen('document', 'click', () => {\n                if(!this.preventDocumentDefault) {\n                    this.hide();\n                }\n                this.preventDocumentDefault = false;\n            });\n        }\n    }\n    \n    toggle(event: Event) {\n        if(this.container.offsetParent)\n            this.hide();\n        else\n            this.show(event);\n    }\n    \n    show(event: Event) {\n        this.preventDocumentDefault = true;\n        this.container.style.display = 'block';\n        this.domHandler.absolutePosition(this.container, event.target);\n        this.domHandler.fadeIn(this.container, 250);\n    }\n    \n    hide() {\n        this.container.style.display = 'none';\n    }\n\n    unsubscribe(item: any) {\n        if(item.eventEmitter) {\n            item.eventEmitter.unsubscribe();\n        }\n        \n        if(item.items) {\n            for(let childItem of item.items) {\n                this.unsubscribe(childItem);\n            }\n        }\n    }\n        \n    ngOnDestroy() {\n        if(this.popup && this.documentClickListener) {\n            this.documentClickListener();\n        }\n        \n        if(this.model) {\n            for(let item of this.model) {\n                this.unsubscribe(item);\n            }\n        }\n    }\n\n}\n\n@NgModule({\n    imports: [CommonModule,RouterModule],\n    exports: [TieredMenu,RouterModule],\n    declarations: [TieredMenu,TieredMenuSub]\n})\nexport class TieredMenuModule { }\n"]}